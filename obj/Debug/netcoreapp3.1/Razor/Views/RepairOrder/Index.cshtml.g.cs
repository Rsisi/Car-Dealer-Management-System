#pragma checksum "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8af62e358e35b719eeb79fc19bb2c1258eadf6c9"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_RepairOrder_Index), @"mvc.1.0.view", @"/Views/RepairOrder/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/_ViewImports.cshtml"
using team011;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/_ViewImports.cshtml"
using team011.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"8af62e358e35b719eeb79fc19bb2c1258eadf6c9", @"/Views/RepairOrder/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b6eceadba93b855566579e663d5cd9e6ca14d499", @"/Views/_ViewImports.cshtml")]
    public class Views_RepairOrder_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("vinForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("vin "), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("openRepairOrderForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("row justify-content-md-center"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("display:none"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("name", "_Customer", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("newRepairForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\n");
#nullable restore
#line 2 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
  
    var allCustomers = ViewBag.allcustomers as SelectList;
    var currentUserRole = HttpContextAccessor.HttpContext.Session.GetString("loggedUserRole") as string;
    //var currentUserName = HttpContextAccessor.HttpContext.Session.GetString("loggedUserName") as string;

#line default
#line hidden
#nullable disable
            WriteLiteral("\n");
            WriteLiteral("\n<div class=\"container\">\n    <div>\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "8af62e358e35b719eeb79fc19bb2c1258eadf6c96589", async() => {
                WriteLiteral("\n            <div class=\"form-group row\">\n                <div class=\"col-sm-10\">\n\n                    <input type=\"text\" id=\"txtvin\" placeholder=\"Enter VIN Here\"\n                           class=\"form-control\" required");
                BeginWriteAttribute("value", " value=\"", 655, "\"", 663, 0);
                EndWriteAttribute();
                WriteLiteral(" />\n                    <span class=\"error\" style=\"color:red; display:none\">*</span>\n");
                WriteLiteral(@"                    <small id=""loginError"" class=""form-text text-muted errortext"" style=""display:none"">This vehicle is not sold by us</small>
                </div>

                <div class=""col-sm-2"">
                    <input type=""button"" style=""bottom:0"" class=""btn btn-primary"" id=""btnsearchvehicle"" value=""Search"" />
                </div>

            </div>
        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\n\n\n    </div>\n    <div id=\"vehiclerepairs\" class=\"card card-body bg-light\">\n\n\n        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "8af62e358e35b719eeb79fc19bb2c1258eadf6c98964", async() => {
                WriteLiteral(@"
            <div class=""col-sm-12"">
                <h5>Vehicle Detials</h5>
                <div class=""form-group row "">

                    <div class=""col-sm-6"">

                        <label>
                            VIN:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtVIN"" />

                        </div>


                    </div>
                    <div class=""col-sm-6"">

                        <label>
                            Vehicle Type:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtType"" />

                        </div>


                    </div>



                </div>
                <div class=""form-group row "">
                    <div class=""col-sm-6"">

                        <label>
                            Model Name:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtModel"" />

                        </div>


                    </div>

                    <div class=""col-sm-6"">

                        <label>
                            Model Year:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtYear"" />

                        </div>


                    </div>


                </div>
                <div class=""form-group row "">

                    <div class=""col-sm-6"">

                        <label>
                            Manufacturer:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtManufacturer"" />

                        </div>


                    </div>
                    <div class=""col-sm-6"">

                        <label>
                            Color(s):
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtColor"" />

                        </div>


                    </div>

                </div>

                <h5>Repair Details</h5>
                <div class=""form-group row "">


                    <div class=""col-sm-6"">

                        <label>
                            Customer Name
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtcustomerName"" />

                        </div>


                    </div>
                    <div class=""col-sm-6"">

                        <label>
                            Service Writer
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtserviceWriter"" />

                        </div>


                    </div>


                </div>
                <div class=""form-group row "">

                    <div class=""col-sm-6"">

                        <label>
                            Start Date:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtstartdate"" />

                        </div>


                    </div>
                    <div class=""col-sm-6"">

                        <label>
                            Odometer Value:
                        </label>
");
                WriteLiteral("                        <div>\n                            <input class=\"form-control intnumber \" type=\"number\" min=\"0\"\n                                   ");
                WriteLiteral(@"                                   disabled id=""txtOdometer"" />

                        </div>


                    </div>

                </div>

                <div class=""form-group row "">

                    <div class=""col-sm-12"">

                        <label>
                            Labor Charge:
                        </label>
");
                WriteLiteral(@"                        <div>
                            <input class=""form-control price"" type=""number"" step=""0.01"" id=""txtlaborcharge"" />
                            <span id=""laborchargeerror"" style=""color:red; display:none"">You cannot enter value less than previous value</span>

                        </div>


                    </div>

                </div>
                <div class=""form-group row "">
                    <div class=""col-sm-12"">
                        <label>Description:</label>
");
                WriteLiteral(@"                        <div>
                            <textarea class=""form-control"" id=""txtdescription""></textarea>

                        </div>

                    </div>

                </div>
            </div>
            <div class=""col-sm-12"">
                <h5>Parts</h5>
                <div class=""form-group row "" id=""partsDetail"">

                    <div class=""col-sm-12"">


                        <table id=""tblParts"" class=""table table-striped table-bordered"" style=""width:100%"">
                            <thead>
                                <tr>
                                    <th>P/N</th>
                                    <th>Quantity</th>
                                    <th>Vendor</th>
                                    <th>Price</th>
");
                WriteLiteral(@"
                                </tr>
                            </thead>



                        </table>


                    </div>

                </div>

            </div>

            <div class=""col-sm-12  justify-content-md-center"">

                <label>
                    Total Charge:
                </label>

                <div>
                    <input type=""number"" class=""form-control"" readonly id=""txttotalcharge"" />
                </div>

            </div>




            <div>
                <input type=""submit"" id=""btnupdate"" class=""btn btn-primary"" value=""Update Repair"" />

                <input type=""button"" class=""btn btn-success"" id=""benCompleteRepair"" value=""Complete Repair"" />
            </div>
        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"



        <div id=""createNewRepairForm"" style=""display:none"">
            <div class=""col-sm-12"">
                <h5>Vehicle Detials</h5>
                <div class=""form-group row "">

                    <div class=""col-sm-6"">

                        <label>
                            VIN:
                        </label>
");
            WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtvVIN"" />

                        </div>


                    </div>
                    <div class=""col-sm-6"">

                        <label>
                            Vehicle Type:
                        </label>
");
            WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtvType"" />

                        </div>


                    </div>



                </div>
                <div class=""form-group row "">
                    <div class=""col-sm-6"">

                        <label>
                            Model Name:
                        </label>
");
            WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtvModel"" />

                        </div>


                    </div>

                    <div class=""col-sm-6"">

                        <label>
                            Model Year:
                        </label>
");
            WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtvYear"" />

                        </div>


                    </div>


                </div>
                <div class=""form-group row "">

                    <div class=""col-sm-6"">

                        <label>
                            Manufacturer:
                        </label>
");
            WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtvManufacturer"" />

                        </div>


                    </div>
                    <div class=""col-sm-6"">

                        <label>
                            Color(s):
                        </label>
");
            WriteLiteral(@"                        <div>
                            <input class=""form-control"" disabled id=""txtvColor"" />

                        </div>


                    </div>

                </div>

            </div>
            <div class=""col"">
                <h5>New Repair</h5>
            </div>
            
            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("partial", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "8af62e358e35b719eeb79fc19bb2c1258eadf6c919792", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper.Name = (string)__tagHelperAttribute_5.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_5);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\n            <div class=\"col\" id=\"showSelectBtn\">\n                <input type=\"button\" id=\"btnSelectCustomer\" class=\"btn btn-info\" value=\"Select Customer\" />\n            </div>\n\n            <div class=\"form-group row\">\n\n            </div>\n\n\n            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "8af62e358e35b719eeb79fc19bb2c1258eadf6c921167", async() => {
                WriteLiteral(@"

                <div class=""col-sm-12"">


                    <div class=""form-group row "">

                        <div class=""col-sm-6"">
                            <label>
                                Customer Selected:
                            </label>
                            <div>
                                <input class=""form-control """);
                BeginWriteAttribute("value", " value=\"", 13116, "\"", 13124, 0);
                EndWriteAttribute();
                WriteLiteral(@" id=""customerID"" style=""display:none"" />
                                <input id=""customerName"" class=""form-control "" readonly  />
                            </div>


                        </div>
                        <div class=""col-sm-6"">

                            <label>
                                Odometer Value:
                            </label>

                            <div>
                                <input id=""txtOdometerValue"" type=""number"" step=""1"" min=""0""
                                       ");
                WriteLiteral(@"                                       required class=""form-control intnumber"" />
                            </div>


                        </div>

                    </div>
                    <div class=""form-group row "">
                        <div class=""col-sm-12"">
                            <label>Description:</label>
");
                WriteLiteral(@"                            <div>
                                <textarea class=""form-control"" id=""txtnewrepairdescription""></textarea>

                            </div>

                        </div>

                    </div>
                    <div class=""form-group row "">
                        <div class=""col-sm-12"">
                            <div>
                                <input type=""submit"" form=""newRepairForm"" class=""btn btn-success"" id=""btnNewRepair"" value=""Create Repair Order"" />
                            </div>

                        </div>

                    </div>

                </div>

            ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"

        </div>





    </div>

  
</div>


<script>


    parttable = $('#tblParts').DataTable()

    var laborcharge, description, VIN, startdate, addpartIndex = 0, addpartIndexArray = [];
    $(document).ready(function () {
        $.noConflict();

        $(""#showSelectBtn"").hide();

        
");
            WriteLiteral(@"
        $('#btnsearchvehicle').on('click', function () {
            vin = $('#txtvin').val()
            console.log(vin)
            if (vin != null && vin != '') {
                searchbyVin(vin)
                $('.error').hide()

            }
            else {
                $('.error').show()
            }
        });

");
            WriteLiteral(@"
        var returnedCustomerID = -1;
        $('#btnSelectCustomer').on('click', function (e) {
            returnedCustomerID = document.getElementById(""ReturnedCustomerID"").innerHTML;
            ReturnedCustomerName = document.getElementById(""ReturnedCustomerName"").innerHTML;
            //document.getElementById(""customerName"").value = returnedCustomerID;

            document.getElementById(""customerID"").value = returnedCustomerID;
            document.getElementById(""customerName"").value = ReturnedCustomerName;
           
        });


        //submit update repair order form

        $('#openRepairOrderForm').submit(function (e) {
");
            WriteLiteral("            e.preventDefault();\n            var currentUserrole = \'");
#nullable restore
#line 526 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
                              Write(currentUserRole);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"'
            updatedLaborcharge = $('#txtlaborcharge').val()
            updateDecription = $('#txtdescription').val()
            
            var newPartArray = [];
            console.log(addpartIndexArray)
            for (let i = 0; i < addpartIndexArray.length; i++) {

                newPartArray.push({
                    VIN: VIN,
                    start_date: startdate,
                    part_number: $(""#txtPN_"" + addpartIndexArray[i]).val(),
                    quantity: $(""#txtQuantity_"" + addpartIndexArray[i]).val(),
                    vendor: $(""#txtVendor_"" + addpartIndexArray[i]).val(),
                    price: $(""#txtPrice_"" + addpartIndexArray[i]).val()
                });

            }
            partQuantityArray = []
            //update quantity
            $('.newQuantity').each(function (index) {
                var pnumber = $(this).parent().prev('td').text()
                var newQuantity = $(this).val()
                partQuantityArray.push({
                    VIN: VIN");
            WriteLiteral(@",
                    start_date: startdate,
                    part_number: pnumber,
                    quantity: newQuantity

                });




            })

           // newPartArray.push({})
         
                if (currentUserrole !== 'Owner') {
                    if (updatedLaborcharge < laborcharge) {
                        $('#txtlaborcharge').val(laborcharge)
                        $(""#laborchargeerror"").show()
                        console.log('error')
                        return false
                    }
                    else {
                        $(""#laborchargeerror"").hide()

                        $.when(addPart(newPartArray), updaterepairOrder(updatedLaborcharge,
                            updateDecription, VIN, startdate),
                            updatePartQuantity(partQuantityArray)).then(function () {
                                alert(""Repair Updated"");
                            });

                    }
                }
                else {
 ");
            WriteLiteral(@"                 
                    $.when(addPart(newPartArray), updaterepairOrder(updatedLaborcharge,
                        updateDecription, VIN, startdate),
                        updatePartQuantity(partQuantityArray)).then(function () {
                            alert(""Repair Updated"");
                    });
");
            WriteLiteral(@"
                }

        
           
          




        })

        //create new order form
      //  $('#btnNewRepair').on('click', function (e) {
        $('#newRepairForm').submit(function (e) {
            e.preventDefault();

            customer = $('#customerID').val()
            if (customer !== '' && customer != null) {
                odometer = $('#txtOdometerValue').val()
                description = $('#txtnewrepairdescription').val()
                vin = VIN
                console.log(customer)
                createNewRepairForm(vin, customer, odometer, description)

            }
            else {
                alert(""Please select the customer"")
            }
           


        })
        //complete repair order
        $('#benCompleteRepair').on('click', function (e) {
            e.preventDefault();


            completeOrder(VIN, startdate) 

        })

");
            WriteLiteral(@"
    });

    function remove(e) {
       
        addpartIndexArray.splice(addpartIndexArray.indexOf(addpartIndexArray.find(row => row == $(e).parents('tr').prop('id'))), 1);
      
      //  addpartIndexArray.splice(addpartIndexArray.indexOf($(e).parents('tr').prop('id')),1)  //.slice($(e).parents('tr').prop('id'))
        console.log(addpartIndexArray)
        parttable.row($(e).parents('tr'))
            .remove()
            .draw();

      
    }

    function searchbyVin(vin) {
        $.ajax({
            type: ""GET"",
            url: '");
#nullable restore
#line 664 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("SearchOrderByVIN", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'vin': vin,

            },
            success: function (response) {
                VIN = vin
                if (response.hasOpenOrder && response.issoldVehicle) {

                        $('.errortext').hide()
                        $('#openRepairOrderForm').show();
                        $('#createNewRepairForm').hide()
                        $('#txtdescription').text(response.repairOrder.description)
                        $('#txtlaborcharge').val(response.repairOrder.labor_charge)
                        $('#txtstartdate').val(moment(response.repairOrder.start_date).format('MM/DD/YYYY'))
                        $('#txtserviceWriter').val(response.repairOrder.repair_starter_name)
                        $('#txtcustomerName').val(response.repairOrder.customer_name)
                        $('#txtType').val(response.repairOrder.vehicle_type)
                        $('#txtModel').val(response.repairOrder.model_name)
                        $('#txtYear').val(res");
            WriteLiteral(@"ponse.repairOrder.model_year)
                        $('#txtVIN').val(vin)
                        $('#txtManufacturer').val(response.repairOrder.manufacturer_name)
                        $('#txtColor').val(response.repairOrder.colors)
                        $('#txtOdometer').val(response.repairOrder.odometer_value)
                        $('#txttotalcharge').val(response.repairOrder.total_cost)



                        laborcharge = response.repairOrder.labor_charge
                        description = response.repairOrder.description
                       
                        startdate = response.repairOrder.start_date
                        console.log(VIN)
                        //if has parts

                        if (parttable != null) {
                            parttable.destroy();


                            parttable = $('#tblParts').DataTable({
                                data: response.parts,
                                dom: ""<'row'<'col-sm-12 col-md-6'l><'col-sm-12 co");
            WriteLiteral(@"l-md-6'B>>"" +
                                    ""<'row'<'col-sm-12'tr>>"" +
                                    ""<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>"",
                                //add addpart button
                                buttons: [
                                    {
                                        text: 'Add Part',
                                        className: ""btn btn-sm btn-primary"",
                                        action: function (e, dt, node, config) {
                                            //index = 0
                                          
                                            addpartIndex++
                                            var newRowHtml = '<tr id=""' + addpartIndex+'"">' +
                                                '<td> <input id=""txtPN_' + addpartIndex + '"" style=""width:80%"" required></input> </td>' +
                                                '<td> <input type=""number""  id=""txtQuantity_' + addpartIndex + '"" ");
            WriteLiteral(@" style=""width:80%"" required onkeypress=""validateintnumber(this)"" ></input> </td>' +
                                                '<td> <input id=""txtVendor_' + addpartIndex + '"" style=""width:80%"" required></input> </td>' +
                                                '<td> <input type=""number"" step=""0.01"" class=""price"" id=""txtPrice_' + addpartIndex + '"" style=""width:80%"" required  oninput=""validate2decimals(this)"" ></input> <a onclick=""remove(this)""><i class=""far fa-trash-alt""></i></a> </td>' +

                                                '</tr>'
                                            addpartIndexArray.push(addpartIndex)

                                            dt.row.add($(newRowHtml)).draw();
                                           
                                        }
                                    },

                                ],
                                ""autoWidth"": false,
                                columns: [
                                    {
       ");
            WriteLiteral(@"                                 data: ""part_number"",
                                        ""width"": ""30%"",


                                    },
                                    {
                                        data: ""quantity"",
                                        ""width"": ""10%"",
                                        render: function (data, type, full, meta) {
                                            if (full != null) {


                                                var Html = ""<a  class='xedit' onclick='fnCreateTextBox(""+data+"", this)'>"" + data + ""</a>""
                                                return Html
                                            }

                                        }
                                    },
                                    {
                                        data: ""vendor"",
                                        ""width"": ""20%""
                                    },
                                    {
                   ");
            WriteLiteral("                     data: \"price\",\n                                        \"width\": \"20%\"\n                                    },\n");
            WriteLiteral(@"
                                ],

                                language: {
                                    ""zeroRecords"": ""There is no part information available for this repair order."",
                                },


                            })
                        };
                        //float add part button to right

                        $('.dt-buttons').addClass('float-right')
                        //remove the dt-button class from add part button

                        $('.dt-button').removeClass('dt-button')


                }
                else if (!response.hasOpenOrder && response.issoldVehicle) {
                    console.log(response.soldVehicle)
                    $('#txtvType').val(response.soldVehicle.vehicle_type)
                    $('#txtvModel').val(response.soldVehicle.model_name)
                    $('#txtvYear').val(response.soldVehicle.model_year)
                    $('#txtvVIN').val(vin)
                    $('#txtvManufacturer').val(response.");
            WriteLiteral(@"soldVehicle.manufacturer_name)
                    $('#txtvColor').val(response.soldVehicle.vehicle_color)

                    $('#openRepairOrderForm').hide();
                    $('#createNewRepairForm').show()
                    $('.errortext').hide()
                }
                else {
                   
                    $('#createNewRepairForm').hide()
                        $('.errortext').show()



                        $('#openRepairOrderForm').hide();

                    return false
                    }

            },


        });
    }


    function fnCreateTextBox(value, el) {
        textbox = '<input type=""text""  onkeypress= ""validateintnumber(this)"" class=""newQuantity"" value=""' + value + '"" ></input>'

        return $(el).parent().empty().append(textbox)

");
            WriteLiteral("    }\n\n    function updaterepairOrder(updatelabor, updateDecription,  VIN,  start_date) {\n\n        $.ajax({\n            type: \"POST\",\n            url: \'");
#nullable restore
#line 836 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("UpdateRepairOrder", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'laborcharge': updatelabor, 'description': updateDecription,  'VIN': VIN,  'start_date':start_date
            },
            success: function (response) {
                if (response) {
                    laborcharge = updatelabor
                    description = updateDecription

                    addpartCount = 0

                }

            }



        })


    }

    function addPart(partArray) {

        $.ajax({
            type: ""POST"",
            url: '");
#nullable restore
#line 862 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("AddPart", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'parts': partArray
            },
            success: function (response) {
                console.log(response)
                if (response.success) {


                    if (response.existPN.length != 0) {
                        alert('Part exists, Please update the quantity for the following part numbers:' + response.existPN)
                    }



                    searchbyVin(VIN)
                }
                addpartIndex = 0
                addpartIndexArray = []

            }



        })

    }

    function updatePartQuantity(partArray) {

        $.ajax({
            type: ""POST"",
            url: '");
#nullable restore
#line 894 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("UpdatePartQuantity", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'parts': partArray
            },
            success: function (response) {
                if (response) {

                    searchbyVin(VIN)
                }

            }



        })

    }

    function createNewRepairForm(vin, customer, odometer, description) {
         $.ajax({
            type: ""POST"",
            url: '");
#nullable restore
#line 915 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
             Write(Url.Action("CreateNewRepair", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
            data: {
                'vin': vin, 'customer': customer, 'odometer': odometer, 'description': description
            },
            success: function (response) {
                if (response) {
                    searchbyVin(vin)
                }
                else {
                    alert(""This vehicle has a repair order completed today, you cannot start the new repair order on the same day!"")
                }

            }



        })
    }

    function completeOrder(vin, start_date) {
        $.ajax({
        type: ""POST"",
        url: '");
#nullable restore
#line 937 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
         Write(Url.Action("CompleteRepairOrder", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"',
        data: {
            'vin': vin, 'start_date': start_date
        },
        success: function (response) {
            if (response) {
                alert(""Order Completed! Redirecting to repair home page..."")
                document.location.href='");
#nullable restore
#line 944 "/Users/christineloveyy/Gatech/6400 DB/GIT/cs6400-2021-03-Team011/team011/team011/Views/RepairOrder/Index.cshtml"
                                   Write(Url.Action("Index", "RepairOrder"));

#line default
#line hidden
#nullable disable
            WriteLiteral("\'\n            }\n\n        }\n\n\n\n    })\n    }\n</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public IHttpContextAccessor HttpContextAccessor { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
